<div class="col-xs-12 col-md-6 col-md-offset-3">
  <h1>Familia <%= current_family.apellido %></h1>
  <h3 class='no_top_margin'>Nuevo Movimiento</h3>

 <div class="seccion">
    <%= simple_form_for [current_school, current_family, @movement] do |f| %>
      <div class="col-md-6 col-xs-12">
        <div class="col-md-10">
          <%= f.input :tipo, as: :select, collection: Movement::TIPO_TIPOS_DDLB %>
          <br />
        </div>
        <div class="clearfix"></div>
        
        <div class="col-md-10">
          <%= f.input :monto, input_html: { class: 'input-sm' } %>
          <br />
        </div>
        <div class="clearfix"></div>
      </div>
      <div class="col-xs-12 col-md-6">  
        <div class="col-md-10">
          <%= f.input :descuento, as: :select, :include_blank => false, collection: Movement::TIPO_DESCUENTOS %>
          <br />
        </div>
        <div class="clearfix"></div>

        <div class="col-md-10">
          <%= f.input :forma, as: :select, collection: Movement::TIPO_FORMAS, label: 'Forma de Pago' %>
          <br />
        </div>
        <div class="clearfix"></div>
      </div>
      <div class="col-xs-12">  
        <div class="col-md-11">
          <%= f.input :nota, input_html: { class: 'input-sm' } %>
          <br />
        </div>
        <div class="clearfix"></div>
        <br />        
      </div>

      <div>  
        <br /><br />
        <div class="pull-right">
          <%= link_to school_family_path(current_school, current_family), class: 'btn btn-primary' do %>
            <span class="glyphicon glyphicon-remove"></span> 
            Cancelar
          <% end %>
        
          <%= button_tag(type: 'submit', class: 'btn btn-primary separate_btn') do %>
            <span class="glyphicon glyphicon-ok"></span>
            Crear
          <% end %>
        </div>
      </div>
      <div class="clearfix"></div>
    <% end %>
  </div> 
</div>


<script>
  $(function() {
    if($('#movement_monto').val() == 0){
      $('#movement_monto').val('');
    }

    tipo = $('#movement_tipo');
    descuento = $('#movement_descuento');
    forma = $('#movement_forma');

    tipo.change(function() {
      if(tipo.val() == <%= Movement::TIPO_TIPOS['Servicio'] %> || tipo.val() == <%= Movement::TIPO_TIPOS['Nota de CrÃ©dito'] %>){
        descuento.prop('disabled', 'disabled')
                 .val('');
        forma.prop('disabled', 'disabled')
             .val('');
      }
      else{
        descuento.prop('disabled', false);
        forma.prop('disabled', false);
      }
    });
  });
</script>